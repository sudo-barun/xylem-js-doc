<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xylem-JS Documentation</title>
<meta name="description" content="Xylem-JS Documentation">
<link rel="stylesheet" href="/xylem-js-doc/docs/node_modules/bootstrap/dist/css/bootstrap.min.css">

<link rel="stylesheet" href="/xylem-js-doc/docs/node_modules/@highlightjs/cdn-assets/styles/default.min.css">

<style>

:root {
	tab-size: 4;
}

pre {
	border: 2px solid #888;
	padding: 8px;
}

article > h2:not(:first-child) {
	margin-top: 2.5rem;
}

article > h3 {
	margin-top: 2rem;
}

.top-container {
	min-height: 100dvh;
	display: grid;
	grid-template-rows: auto 1fr auto;
	grid-template-columns: minmax(0, 1fr);
}

@media (min-width: 992px) {
	.top-container {
		grid-template-rows: auto 1fr auto;
	}
}

.sidenav {
	max-height: 100vh;
	overflow: auto;
}

@media (min-width: 992px) {
	.sidenav {
		position: sticky;
		top: 0;
	}
}

</style>

</head>
<body>

<div class="top-container">

	<div>
		<div>
	<nav class="navbar navbar-expand-lg bg-body-tertiary">
		<div class="container">
			<button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item">
						<a href="/xylem-js-doc/docs/" class="nav-link">
							Home
						</a>
					</li>
					<li class="nav-item">
						<a href="/xylem-js-doc/docs/doc/installation/" class="nav-link">
							Docs
						</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>
</div>
	</div>

	<div>
		<div class="container" style="margin-block: 24px;">

			<div class="row">

				<nav class="col-12 col-md-3 py-3 align-self-start sidenav">
					<nav>
	<div>
		Getting Started
	</div>
	<ul class="nav flex-column">
		<li class="nav-item">
			<a href="/xylem-js-doc/docs/doc/installation/" class="nav-link">
				Installation
			</a>
		</li>
		<li class="nav-item">
			<a href="/xylem-js-doc/docs/doc/typescript/" class="nav-link">
				TypeScript
			</a>
		</li>
		<li class="nav-item">
			<a href="/xylem-js-doc/docs/doc/jsx/" class="nav-link">
				JSX
			</a>
		</li>
		<li class="nav-item">
			<a href="/xylem-js-doc/docs/doc/hello-world-example/" class="nav-link">
				Hello World example
			</a>
		</li>
	</ul>

	<div>
		Learn
	</div>
	<ul class="nav flex-column">
		<li class="nav-item">
			<a href="/xylem-js-doc/docs/doc/reactivity/" class="nav-link">
				Reactivity
			</a>
		</li>
		<li class="nav-item">
			<a href="/xylem-js-doc/docs/doc/component/" class="nav-link">
				Component
			</a>
		</li>
		<li class="nav-item">
			<a href="/xylem-js-doc/docs/doc/conditional/" class="nav-link">
				Conditional
			</a>
		</li>
		<li class="nav-item">
			<a href="/xylem-js-doc/docs/doc/loop/" class="nav-link">
				Loop
			</a>
		</li>
		<li class="nav-item">
			<a href="/xylem-js-doc/docs/doc/attribute/" class="nav-link">
				Attribute
			</a>
		</li>
	</ul>

</nav>
				</nav>

				<article class="col-12 col-md-9 py-3">

					<h1>Component</h1>

					<p>To create a component:</p>

<ol><li>Create a subclass that inherits from <code>Component</code> class and define <code>build</code> method.</li><li>Instantiate the subclass</li></ol>

<p>To display the component in UI, use <code>mountComponent</code> function.</p>

<p>Here is an example of Counter component. The value of count starts with <code>0</code>. When the <code>Click Me</code> button is clicked, the value of count increases by <code>1</code> and the new value is displayed in the UI.</p>

<p><code>counter.js</code> :</p>

<pre data-language="javascript">
import Component from &#39;./node_modules/@xylem-js/xylem-js/dom/Component.js&#39;;
import createStore from &#39;./node_modules/@xylem-js/xylem-js/core/createStore.js&#39;;
import mountComponent from &#39;./node_modules/@xylem-js/xylem-js/dom/mountComponent.js&#39;;
import parseHTML from &#39;./node_modules/@xylem-js/xylem-js/dom/parseHTML.js&#39;;

class Counter extends Component
{
	build()
	{
		const count$ = createStore(0);

		return parseHTML([
			&#39;&lt;div&gt;&#39;,
			[
				&#39;Count: &#39;,
				count$,
			],
			&#39;&lt;/div&gt;&#39;,
			&#39;&lt;div&gt;&#39;,
			[
				&#39;&lt;button&gt;&#39;, {
					&#39;@click&#39;: () =&gt; count$._(count$._() + 1),
				},
				[
					&#39;Click Me&#39;,
				],
				&#39;&lt;/button&gt;&#39;,
			],
			&#39;&lt;/div&gt;&#39;,
		]);
	}
}

mountComponent(new Counter(), document.getElementById(&#39;app-container&#39;));
</pre>

<p>JSX version:</p>

<p><code>counter-jsx.tsx</code> :</p>

<pre data-language="javascript">
import Component from &#39;./node_modules/@xylem-js/xylem-js/dom/Component.js&#39;;
import mountComponent from &#39;./node_modules/@xylem-js/xylem-js/dom/mountComponent.js&#39;;

class Counter extends Component
{
	build()
	{
		const count$ = createStore(0);

		return &lt;&gt;
			&lt;div&gt;
				Current count: {}
				{ count$ }
			&lt;/div&gt;
			&lt;div&gt;
				&lt;button
					on:click={() =&gt; count$._(count$._() + 1)}
				&gt;
					Click
				&lt;/button&gt;
			&lt;/div&gt;
		&lt;/&gt;;
	}
}

mountComponent(new Counter(), document.getElementById(&#39;app-container&#39;)!);
</pre>

<h2>Lifecycle events of component</h2>

<p>Component has following lifecycle events:</p>

<ol><li>afterSetup</li><li>afterAttachToDom</li><li>beforeDetachFromDom</li></ol>

<p>The lifecycle events are available as property of the component with the same name.</p>

<h3>afterSetup</h3>

<p>This is called after virtual DOM tree is created, before DOM nodes are available. This is useful to modify components like modifying class attribute. However, it is rarely necessary.</p>

<p>For Server Side Rendered component, this is called in both server side and client side.</p>

<h3>afterAttachToDom</h3>

<p>This is called after DOM tree is attached to the document. The subscribers are called immediately, so any changes made to the DOM nodes is immediately reflected without flash of previous state.</p>

<p>This is useful for asynchronous operation like <code>setTimeout()</code>, <code>setInterval()</code>, <code>fetch()</code>, <code>XMLHttpRequest:send()</code> etc.</p>

<p>For Server Side Rendered component, this is not called in server side but during hydration in client side.</p>

<h3>beforeDetachFromDom</h3>

<p>This is called before DOM tree is removed from the document.</p>

<p>This is useful for cleanup of operation done in <code>afterAttachToDom</code> like <code>clearTimeout()</code>, <code>clearInterval()</code>, <code>AbortController:abort()</code> , <code>XMLHttpRequest:abort()</code> etc.</p>

<h3>Example</h3>

<p>The example below shows Clock component that shows current date-time and update every second. In <code>afterAttachToDom</code>, <code>setInterval()</code> is called and in <code>beforeDetachFromDom</code>, <code>clearInterval()</code> is called.</p>

<p><code>clock.js</code> :</p>

<pre data-language="javascript">
import Component from &#39;./node_modules/@xylem-js/xylem-js/dom/Component.js&#39;;
import createStore from &#39;./node_modules/@xylem-js/xylem-js/core/createStore.js&#39;;
import mountComponent from &#39;./node_modules/@xylem-js/xylem-js/dom/mountComponent.js&#39;;
import parseHTML from &#39;./node_modules/@xylem-js/xylem-js/dom/parseHTML.js&#39;;

class Clock extends Component
{
	build()
	{
		const currentDateTime$ = createStore(&#39;&#39;);
		let intervalID;

		this.afterAttachToDom.subscribe(() =&gt; {
			currentDateTime$._(new Date() + &#39;&#39;);
			intervalID = setInterval(() =&gt; {
				currentDateTime$._(new Date() + &#39;&#39;);
			}, 1000);
		});

		this.beforeDetachFromDom.subscribe(() =&gt; {
			clearInterval(intervalID);
		});

		return parseHTML([
			&#39;&lt;div&gt;&#39;,
			[
				&#39;Current date-time: &#39;,
				currentDateTime$,
			],
			&#39;&lt;/div&gt;&#39;,
		]);
	}
}

mountComponent(new Clock(), document.getElementById(&#39;app-container&#39;));
</pre>

				</article>

			</div>

		</div>
	</div>

	<div>
		<footer class="py-2 py-md-3 mt-5 bg-body-tertiary">
	<div class="container py-2 py-md-3 px-4 px-md-3 text-body-secondary">
		<div class="row">
			<div class="col-lg-3 mb-3">
				<a href="/xylem-js-doc/docs/">Xylem-JS</a>
			</div>
			<div class="col-6 col-lg-2 offset-lg-1 mb-3">
				<a href="https://github.com/sudo-barun/xylem-js" target="_blank">GitHub</a>
			</div>
			<div class="col-6 col-lg-2 mb-3">
				<a href="https://www.npmjs.com/package/@xylem-js/xylem-js" target="_blank">NPM</a>
			</div>
		</div>
	</div>
	<div class="container text-body-secondary">
		<svg aria-label="Warning:" style="width: 1em; height: 1em;">
			<path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" fill="currentColor"></path>
		</svg>
		<small>
			This project is currently in initial development phase. Public API MAY change at any time.
		</small>
	</div>
</footer>
	</div>

</div>

<script src="/xylem-js-doc/docs/node_modules/@highlightjs/cdn-assets/highlight.min.js"></script>

<script src="/xylem-js-doc/docs/node_modules/@highlightjs/cdn-assets/languages/xml.min.js"></script>
<script src="/xylem-js-doc/docs/node_modules/@highlightjs/cdn-assets/languages/css.min.js"></script>
<script src="/xylem-js-doc/docs/node_modules/@highlightjs/cdn-assets/languages/javascript.min.js"></script>

<script src="/xylem-js-doc/docs/modules/app.js" type="module"></script>

</body>
</html>
